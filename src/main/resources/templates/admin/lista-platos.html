<!DOCTYPE html>
<html lang="es" xmlns:th="https://www.thymeleaf.org">
<head>
  <title>Platos</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script>
    // function confirmBorrado(event) {
    //   // var del = confirm("¿Estás seguro de que quieres borrar este plato?");
    //   var source = event.target || event.srcElement;
    //   console.log(source);
    //   if (confirm("¿Estás seguro de que quieres borrar este plato?")) {
    //     alert("Plato borrado - " + source.idPlato)
    //   // } else {
    //   //   alert("Record Not Deleted")
    //   }
    // }
    $(".borrar-plato").on('click', function() {
      var element = this;
      console.log(this)
      // $.each(($(this).data('args') || []), function(_,fn) {
      //   if (fn[0] in window) window[fn[0]].apply(element, fn[1]);
      // });
    });
  </script>
</head>
<body>
<h2>Platos</h2>
<div th:each="c : ${categorias}">
  <h3 th:text="${c}"></h3>
  <table>
    <tr>
      <th>Nombre</th>
      <th>Ingredientes</th>
      <th>Precio</th>
      <th>Etiqueta</th>
    </tr>
    <tr th:each="p : ${#vars.getVariable(c)}">
      <td th:text="${p.nombre}"></td>
      <td th:text="${p.ingredientes}"></td>
      <td th:text="${p.precio}"></td>
      <td th:text="${p.etiqueta}"></td>
      <td>
        <a th:attr="href='/platos/modificar/' + ${p.id}">Modificar</a>
        <a th:attr="href='/platos/borrar/' + ${p.id}">Borrar</a>
        <!--        <button th:attr="onclick='confirmBorrado('+${p.id}+')'">Borrar</button>-->
        <!--        <button th:attr="idPlato=${p.id}" class="borrar-plato">Borrar</button>-->
      </td>
    </tr>
  </table>
</div>
<a href="/platos/nuevo">Nuevo plato</a>
</body>
</html>
